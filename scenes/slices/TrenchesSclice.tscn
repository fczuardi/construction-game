[gd_scene load_steps=10 format=3 uid="uid://c4ngp6i1r246e"]

[ext_resource type="Script" uid="uid://bly6ty8fepn6x" path="res://lib/Wiring/wiring.gd" id="1_df6nt"]
[ext_resource type="PackedScene" uid="uid://cq7lqptnqemxp" path="res://lib/PauseMenu/PauseMenu.tscn" id="2_qqb8b"]
[ext_resource type="Script" uid="uid://dr0dlgpb3oddd" path="res://lib/TrenchStumbleClassifier/trench_stumble_classifier.gd" id="2_t0bal"]
[ext_resource type="PackedScene" uid="uid://rnjcf0y4dsgm" path="res://lib/PlayerControls/PlayerControls.tscn" id="3_lge7o"]
[ext_resource type="Script" uid="uid://cqsox5yy3agv1" path="res://lib/PlayerCameras/player_cameras.gd" id="4_7kirt"]
[ext_resource type="PackedScene" uid="uid://br08vaqh6iywm" path="res://lib/PlayerRunner/PlayerRunner.tscn" id="4_gmcay"]
[ext_resource type="PackedScene" uid="uid://dbsb8ppq8g32i" path="res://lib/PlayerVisuals/PlayerVisuals.tscn" id="5_df6nt"]
[ext_resource type="Material" uid="uid://c237rtawmxp6j" path="res://materials/sbs_ptp3_ground_08.tres" id="6_df6nt"]

[sub_resource type="BoxMesh" id="BoxMesh_rtpkt"]
size = Vector3(26.25, 1, 42)

[node name="TrenchesSclice" type="Node3D"]

[node name="Wiring" type="Node" parent="." node_paths=PackedStringArray("hud_container", "controls", "character_body", "character_visuals", "cameras")]
script = ExtResource("1_df6nt")
hud_container = NodePath("../HUD/MarginContainer")
controls = NodePath("../HUD/MarginContainer/PlayerControls")
character_body = NodePath("../PlayerRunner")
character_visuals = NodePath("../PlayerRunner/Visuals")
cameras = NodePath("../PlayerRunner/Cameras")

[node name="TrenchStumbleClassifier" type="Node" parent="." node_paths=PackedStringArray("character_body", "character_visuals")]
script = ExtResource("2_t0bal")
character_body = NodePath("../PlayerRunner")
character_visuals = NodePath("../PlayerRunner/Visuals")

[node name="Other" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Other"]
transform = Transform3D(1, 0, 0, 0, 0.5251152, 0.8510312, 0, -0.8510312, 0.5251152, 0, 1.8526119, 0)

[node name="DirectionalLight3D2" type="DirectionalLight3D" parent="Other"]
transform = Transform3D(0.98560923, -0.10350547, 0.13364542, -0.16903989, -0.6035023, 0.7792373, 0, -0.79061484, -0.6123139, 0, 1.8526119, -1.4837049)

[node name="PlayerRunner" parent="." instance=ExtResource("4_gmcay")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.100000024, 0)

[node name="Visuals" parent="PlayerRunner" instance=ExtResource("5_df6nt")]
runner_path = NodePath("..")

[node name="FPCams" type="Node3D" parent="PlayerRunner/Visuals"]

[node name="ClipboardWalkCam" type="Camera3D" parent="PlayerRunner/Visuals/FPCams"]
transform = Transform3D(-0.9961947, 0.082889944, -0.026932573, 0, 0.30901697, 0.95105654, 0.08715564, 0.9474375, -0.30784106, 0.05, 1.6, 0.3)

[node name="ClipboardRunCam" type="Camera3D" parent="PlayerRunner/Visuals/FPCams"]
transform = Transform3D(-1, 8.742278e-08, 3.821371e-15, 0, -4.371139e-08, 1, 8.742278e-08, 1, 4.371139e-08, 0, 1.27, 0.5)

[node name="Camera3D" type="Camera3D" parent="PlayerRunner"]
transform = Transform3D(-0.9986295, -0.05233596, -8.742278e-08, -0.05233596, 0.9986295, 0, 8.7302965e-08, 4.5753548e-09, -1, 0, 1.689, -3.356575)
current = true

[node name="Cameras" type="Node3D" parent="PlayerRunner"]
unique_name_in_owner = true
script = ExtResource("4_7kirt")
extra_rigs = Array[NodePath]([NodePath("../Visuals/FPCams/ClipboardWalkCam"), NodePath("../Visuals/FPCams/ClipboardRunCam")])

[node name="OutputCamera" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 1.21669e-08, -8.657199e-08, 0, 0.9902681, 0.13917312, 8.742278e-08, 0.13917312, -0.9902681, 0, 2.5, -5)
current = true
fov = 70.0

[node name="ShoulderWalkCam" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 1.21669e-08, -8.657199e-08, 0, 0.9902681, 0.13917312, 8.742278e-08, 0.13917312, -0.9902681, 0, 2.5, -5)

[node name="ShoulderRunCam" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 1.21669e-08, -8.657199e-08, 0, 0.9902681, 0.13917312, 8.742278e-08, 0.13917312, -0.9902681, 0, 1.3, -4)

[node name="Trenches" type="CSGCombiner3D" parent="." groups=["trench"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
material_override = ExtResource("6_df6nt")
use_collision = true

[node name="CSGMesh3D" type="CSGMesh3D" parent="Trenches"]
mesh = SubResource("BoxMesh_rtpkt")

[node name="CSGCombiner3D2" type="CSGCombiner3D" parent="Trenches"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.301, 1.68)
operation = 2

[node name="CSGBox3D3" type="CSGBox3D" parent="Trenches/CSGCombiner3D2"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, -1.969, 0, 2.985)
material_override = ExtResource("6_df6nt")
size = Vector3(5, 0.5, 0.45)

[node name="CSGBox3D4" type="CSGBox3D" parent="Trenches/CSGCombiner3D2"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 1.367, 0, 5.877)
material_override = ExtResource("6_df6nt")
size = Vector3(5, 0.5, 0.35)

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="MarginContainer" type="MarginContainer" parent="HUD"]
custom_minimum_size = Vector2(540, 1200)
layout_mode = 1
offset_right = 540.0
offset_bottom = 1200.0
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="PauseMenu" parent="HUD/MarginContainer" instance=ExtResource("2_qqb8b")]
layout_mode = 2
size_flags_vertical = 0
category_icon = 0
main_title = "Trenches"

[node name="PauseMenuPanel" parent="HUD/MarginContainer/PauseMenu/MarginContainer" index="0"]
visible = false

[node name="SliceTitleLabel" parent="HUD/MarginContainer/PauseMenu/MarginContainer/PauseMenuPanel/MarginContainer/VBoxContainer" index="0"]
text = "Trenches"

[node name="PauseMenuBgIcon" parent="HUD/MarginContainer/PauseMenu/MarginContainer/PauseMenuPanel" index="1"]
text = "üç∞"

[node name="PlayerControls" parent="HUD/MarginContainer" instance=ExtResource("3_lge7o")]
layout_mode = 2
size_flags_vertical = 8

[editable path="HUD/MarginContainer/PauseMenu"]
