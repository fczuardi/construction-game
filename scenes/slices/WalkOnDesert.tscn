[gd_scene load_steps=31 format=3 uid="uid://bvqjumns0dvc1"]

[ext_resource type="Script" uid="uid://bjc7lry15qhrc" path="res://slices/walk_on_desert.gd" id="1_eqn0a"]
[ext_resource type="PackedScene" uid="uid://br08vaqh6iywm" path="res://lib/PlayerRunner/PlayerRunner.tscn" id="1_f4lrq"]
[ext_resource type="PackedScene" uid="uid://dbsb8ppq8g32i" path="res://lib/PlayerVisuals/PlayerVisuals.tscn" id="2_roq0i"]
[ext_resource type="PackedScene" uid="uid://jdvf8pm0rn4r" path="res://lib/FlatTerrain/FlatTerrain.tscn" id="3_qldhu"]
[ext_resource type="Material" uid="uid://db8idpthygrsm" path="res://materials/kenney_prototype_dark_09.tres" id="4_eqn0a"]
[ext_resource type="Script" uid="uid://cqsox5yy3agv1" path="res://lib/PlayerCameras/player_cameras.gd" id="4_q5p3a"]
[ext_resource type="PackedScene" uid="uid://bd5aj5us85j5a" path="res://lib/Sun/Sun.tscn" id="5_q5p3a"]
[ext_resource type="Script" uid="uid://b03qu5uc3bmit" path="res://lib/DemoExitOverlay/demo_exit_overlay.gd" id="6_roq0i"]
[ext_resource type="PackedScene" uid="uid://rnjcf0y4dsgm" path="res://lib/PlayerControls/PlayerControls.tscn" id="9_q5p3a"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_q5p3a"]
bg_color = Color(0.2, 0.2, 0.2, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_s8s8t"]
bg_color = Color(0.18, 0.18, 0.18, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_u02a0"]
bg_color = Color(0.212, 0.212, 0.212, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_n34ds"]
bg_color = Color(0.13, 0.13, 0.13, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_sv1qo"]
bg_color = Color(0.2, 0.2, 0.2, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_bwdut"]
bg_color = Color(0.18, 0.18, 0.18, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_kdq8o"]
bg_color = Color(0.212, 0.212, 0.212, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_hoxwi"]
bg_color = Color(0.13, 0.13, 0.13, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ycfqn"]
bg_color = Color(0.2, 0.2, 0.2, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_2g4pj"]
bg_color = Color(0.18, 0.18, 0.18, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_m2yas"]
bg_color = Color(0.212, 0.212, 0.212, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_uuuuj"]
bg_color = Color(0.13, 0.13, 0.13, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_2yuqj"]
bg_color = Color(0.2, 0.2, 0.2, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_kjbv7"]
bg_color = Color(0.18, 0.18, 0.18, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_6pvdt"]
bg_color = Color(0.212, 0.212, 0.212, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_0hkfq"]
bg_color = Color(0.13, 0.13, 0.13, 1)
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25

[sub_resource type="GDScript" id="GDScript_eqn0a"]
script/source = "extends Button

@onready var cameras: PlayerCameras = %Cameras


func _ready() -> void:
    button_down.connect(_on_button_press)

func _on_button_press():
    if cameras:
        cameras.next_rig()
"

[sub_resource type="GDScript" id="GDScript_q5p3a"]
resource_name = "resetbtn"
script/source = "extends Button
@onready var player_runner: PlayerRunner = %PlayerRunner
func _ready() -> void:
    button_down.connect(_on_btn_down)
    
func _on_btn_down():
    player_runner.reset_to_start()
"

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_eqn0a"]
sun_disk_scale = 2.0

[sub_resource type="Sky" id="Sky_q5p3a"]
sky_material = SubResource("PhysicalSkyMaterial_eqn0a")

[sub_resource type="Environment" id="Environment_s8s8t"]
background_mode = 2
background_energy_multiplier = 5.0
sky = SubResource("Sky_q5p3a")

[node name="WalkOnDesert" type="Node3D"]
script = ExtResource("1_eqn0a")

[node name="PlayerRunner" parent="." instance=ExtResource("1_f4lrq")]
unique_name_in_owner = true
speed_modes = Dictionary[String, float]({
"run": 4.0,
"walk": 0.9
})

[node name="Visuals" parent="PlayerRunner" instance=ExtResource("2_roq0i")]
unique_name_in_owner = true
runner_path = NodePath("..")
stride_ref_speed = 0.9
stride_scale_min = 0.5

[node name="FPCams" type="Node3D" parent="PlayerRunner/Visuals"]

[node name="ClipboardWalkCam" type="Camera3D" parent="PlayerRunner/Visuals/FPCams"]
transform = Transform3D(-1, 8.3144e-08, -2.7015123e-08, 0, 0.30901697, 0.95105654, 8.742278e-08, 0.95105654, -0.30901697, 0.05, 1.6, 0.3)

[node name="ClipboardRunCam" type="Camera3D" parent="PlayerRunner/Visuals/FPCams"]
transform = Transform3D(-1, -8.3144e-08, 2.7015123e-08, 0, 0.30901697, 0.95105654, -8.742278e-08, 0.95105654, -0.30901697, 0, 1.27, 0.5)

[node name="Cameras" type="Node3D" parent="PlayerRunner"]
unique_name_in_owner = true
script = ExtResource("4_q5p3a")
blend_time = 0.5
extra_rigs = Array[NodePath]([NodePath("../Visuals/FPCams/ClipboardWalkCam"), NodePath("../Visuals/FPCams/ClipboardRunCam")])

[node name="OutputCamera" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 1.21669e-08, -8.657199e-08, 0, 0.9902681, 0.13917312, 8.742278e-08, 0.13917312, -0.9902681, 0, 2.5, -5)
current = true
fov = 70.0

[node name="ShoulderWalkCam" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 1.21669e-08, -8.657199e-08, 0, 0.9902681, 0.13917312, 8.742278e-08, 0.13917312, -0.9902681, 0, 2.5, -5)

[node name="ShoulderRunCam" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 1.21669e-08, -8.657199e-08, 0, 0.9902681, 0.13917312, 8.742278e-08, 0.13917312, -0.9902681, 0, 1.3, -4)

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="MarginContainer" type="MarginContainer" parent="HUD"]
custom_minimum_size = Vector2(360, 640)
layout_mode = 1
offset_right = 360.0
offset_bottom = 640.0

[node name="PlayerControls" parent="HUD/MarginContainer" instance=ExtResource("9_q5p3a")]
unique_name_in_owner = true
custom_minimum_size = Vector2(130, 160)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
toggle_north = true
toggle_south = true

[node name="Control" parent="HUD/MarginContainer/PlayerControls" index="1"]
scale = Vector2(0.65, 0.65)

[node name="BtnNorth" parent="HUD/MarginContainer/PlayerControls/Control" index="0"]
theme_override_styles/normal = SubResource("StyleBoxFlat_q5p3a")
theme_override_styles/pressed = SubResource("StyleBoxFlat_s8s8t")
theme_override_styles/hover = SubResource("StyleBoxFlat_u02a0")
theme_override_styles/disabled = SubResource("StyleBoxFlat_n34ds")

[node name="BtnSouth" parent="HUD/MarginContainer/PlayerControls/Control" index="1"]
theme_override_styles/normal = SubResource("StyleBoxFlat_sv1qo")
theme_override_styles/pressed = SubResource("StyleBoxFlat_bwdut")
theme_override_styles/hover = SubResource("StyleBoxFlat_kdq8o")
theme_override_styles/disabled = SubResource("StyleBoxFlat_hoxwi")

[node name="BtnEast" parent="HUD/MarginContainer/PlayerControls/Control" index="2"]
theme_override_styles/normal = SubResource("StyleBoxFlat_ycfqn")
theme_override_styles/pressed = SubResource("StyleBoxFlat_2g4pj")
theme_override_styles/hover = SubResource("StyleBoxFlat_m2yas")
theme_override_styles/disabled = SubResource("StyleBoxFlat_uuuuj")

[node name="BtnWest" parent="HUD/MarginContainer/PlayerControls/Control" index="3"]
theme_override_styles/normal = SubResource("StyleBoxFlat_2yuqj")
theme_override_styles/pressed = SubResource("StyleBoxFlat_kjbv7")
theme_override_styles/hover = SubResource("StyleBoxFlat_6pvdt")
theme_override_styles/disabled = SubResource("StyleBoxFlat_0hkfq")

[node name="DebugHUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="HBoxContainer" type="HBoxContainer" parent="DebugHUD"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Button" type="Button" parent="DebugHUD/HBoxContainer"]
layout_mode = 2
focus_mode = 0
text = "NextCam"
script = SubResource("GDScript_eqn0a")

[node name="Button2" type="Button" parent="DebugHUD/HBoxContainer"]
layout_mode = 2
focus_mode = 0
text = "Reset"
script = SubResource("GDScript_q5p3a")

[node name="Other" type="Node3D" parent="."]

[node name="SunPivot" parent="Other" instance=ExtResource("5_q5p3a")]
transform = Transform3D(0.71703756, 0.24969909, 0.65077394, -0.3288664, 0.94437623, -3.8348304e-08, -0.6145751, -0.21401778, 0.75927156, 0, 0, 0)
auto_intensity = true
hour = 14.58999989827474
east = 40.59998
season = -19.199999

[node name="FlatTerrain" parent="Other" instance=ExtResource("3_qldhu")]
size = 1000.0
material = ExtResource("4_eqn0a")

[node name="CanvasLayer" type="CanvasLayer" parent="Other"]
script = ExtResource("6_roq0i")
corner = 2

[node name="WorldEnvironment" type="WorldEnvironment" parent="Other"]
environment = SubResource("Environment_s8s8t")

[editable path="HUD/MarginContainer/PlayerControls"]
