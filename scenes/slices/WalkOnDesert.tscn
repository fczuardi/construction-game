[gd_scene load_steps=14 format=3 uid="uid://bvqjumns0dvc1"]

[ext_resource type="Script" uid="uid://bjc7lry15qhrc" path="res://slices/walk_on_desert.gd" id="1_eqn0a"]
[ext_resource type="PackedScene" uid="uid://br08vaqh6iywm" path="res://lib/PlayerRunner/PlayerRunner.tscn" id="1_f4lrq"]
[ext_resource type="PackedScene" uid="uid://dbsb8ppq8g32i" path="res://lib/PlayerVisuals/PlayerVisuals.tscn" id="2_roq0i"]
[ext_resource type="PackedScene" uid="uid://jdvf8pm0rn4r" path="res://lib/FlatTerrain/FlatTerrain.tscn" id="3_qldhu"]
[ext_resource type="Material" uid="uid://db8idpthygrsm" path="res://materials/kenney_prototype_dark_09.tres" id="4_eqn0a"]
[ext_resource type="Script" uid="uid://cqsox5yy3agv1" path="res://lib/PlayerCameras/player_cameras.gd" id="4_q5p3a"]
[ext_resource type="PackedScene" uid="uid://bd5aj5us85j5a" path="res://lib/Sun/Sun.tscn" id="5_q5p3a"]
[ext_resource type="Script" uid="uid://b03qu5uc3bmit" path="res://lib/DemoExitOverlay/demo_exit_overlay.gd" id="6_roq0i"]

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_eqn0a"]
sun_disk_scale = 2.0

[sub_resource type="Sky" id="Sky_q5p3a"]
sky_material = SubResource("PhysicalSkyMaterial_eqn0a")

[sub_resource type="Environment" id="Environment_s8s8t"]
background_mode = 2
background_energy_multiplier = 5.0
sky = SubResource("Sky_q5p3a")

[sub_resource type="GDScript" id="GDScript_eqn0a"]
script/source = "extends Button

@onready var cameras: PlayerCameras = %Cameras


func _ready() -> void:
    button_down.connect(_on_button_press)

func _on_button_press():
    if cameras:
        cameras.next_rig()
"

[sub_resource type="GDScript" id="GDScript_q5p3a"]
script/source = "extends Button
@onready var player_runner: PlayerRunner = %PlayerRunner
func _ready() -> void:
    button_down.connect(_on_btn_down)
    
func _on_btn_down():
    print(player_runner)
    print(\"reset?\")
    player_runner.reset_to_start()
"

[node name="WalkOnDesert" type="Node3D"]
script = ExtResource("1_eqn0a")

[node name="Other" type="Node3D" parent="."]

[node name="SunPivot" parent="Other" instance=ExtResource("5_q5p3a")]
transform = Transform3D(-0.7519622, -0.27517906, -0.59902364, -0.34365964, 0.93909425, 1.1135922e-08, 0.56253964, 0.20586026, -0.80073136, 0, 0, 0)
auto_intensity = true
hour = 14.58999989827474
east = -143.2
season = -20.099997

[node name="FlatTerrain" parent="Other" instance=ExtResource("3_qldhu")]
size = 1000.0
material = ExtResource("4_eqn0a")

[node name="CanvasLayer" type="CanvasLayer" parent="Other"]
script = ExtResource("6_roq0i")
corner = 2

[node name="WorldEnvironment" type="WorldEnvironment" parent="Other"]
environment = SubResource("Environment_s8s8t")

[node name="PlayerRunner" parent="." instance=ExtResource("1_f4lrq")]
unique_name_in_owner = true
speed_modes = Dictionary[String, float]({
"run": 2.5,
"walk": 0.9
})

[node name="Visuals" parent="PlayerRunner" instance=ExtResource("2_roq0i")]
unique_name_in_owner = true
runner_path = NodePath("..")
stride_ref_speed = 0.9
stride_scale_min = 0.5
stride_scale_max = 1.5

[node name="Cameras" type="Node3D" parent="PlayerRunner"]
unique_name_in_owner = true
script = ExtResource("4_q5p3a")

[node name="OutputCamera" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, -8.609463e-08, 1.5180811e-08, 0, 0.17364824, 0.9848078, -8.742278e-08, 0.9848078, -0.17364824, 0, 1.7, 0.3)
current = true
fov = 70.0

[node name="ClipboardCam" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, -8.609463e-08, 1.5180811e-08, 0, 0.17364824, 0.9848078, -8.742278e-08, 0.9848078, -0.17364824, 0, 1.7, 0.3)

[node name="ShoulderCam" type="Camera3D" parent="PlayerRunner/Cameras"]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, 1.7, -2)

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="HBoxContainer" type="HBoxContainer" parent="Control"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Button" type="Button" parent="Control/HBoxContainer"]
layout_mode = 2
text = "NextCam"
script = SubResource("GDScript_eqn0a")

[node name="Button2" type="Button" parent="Control/HBoxContainer"]
layout_mode = 2
text = "Reset"
script = SubResource("GDScript_q5p3a")
